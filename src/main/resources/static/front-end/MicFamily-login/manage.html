<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>KTV员工管理系统</title>
    <link href="./ace/css/ace.min.css" rel="stylesheet"/>
    <link href="./font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="./bootstrap-5.1.3-dist/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="./jquery-3.5.1/jquery-3.5.1/jquery-3.5.1.min.js"></script>
    <script src="./vue/vue.js"></script>
    <script src="./js/axios.min.js"></script>

    <style>
        * {
            margin: 0px;
            padding: 0px;
        }

        #man {
            width: 100%;
            height: 600px;
            float: left;
            border: 0px;
        }

        .red-point {
            position: relative;
        }

        .red-point::before {
            content: " ";
            border: 3px solid red; /*设置红色*/
            border-radius: 3px; /*设置圆角*/
            position: absolute;
            z-index: 1000;
            right: 0;
            margin-right: -8px;
            visibility: visible;

        }

        .none-point {
            position: relative;
        }

        .none-point::before {
            content: " ";
            border: 3px solid red; /*设置红色*/
            border-radius: 3px; /*设置圆角*/
            position: absolute;
            z-index: 1000;
            right: 0;
            margin-right: -8px;
            visibility: hidden;

        }
    </style>
</head>
<body>

<script>
    (function ($) {
        $.getUrlParam = function (name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
            var r = window.location.search.substr(1).match(reg);
            if (r != null) return unescape(r[2]);
            return null;
        }
    })(jQuery);

    window.onload = function () {
        var identity = 0;
        identity = sessionStorage.getItem("identity");
        var identityName = "";
        if (identity === 1)
            identityName = "一级权限管理员";
        else if (identity === 2)
            identityName = "二级权限管理员";
        else if (identity === 3)
            identityName = "三级权限管理员";
        else
            identityName = "最高权限管理员";
        $("#addidentity").append(identityName);
    }
</script>

<!--<div id="btm">
    <img src="../image/test.png" id="imgs" style="width: 30px;height: 30px;float: right"/>
</div>-->
<div id="app">
    <div class="main-container select" id="main-container">
        <div class="navbar navbar-default" id="navbar">
            <div style="font-size: 200%;transform:scale(1.2,1.2);">
                <i class="fa fa-cog fa-spin white" style="margin: 5px 5px 5px 100px;"> </i>
                <span class="red">KTV</span>
                <span class="white"> 管理系统  您好：</span>
                <span class="white" id="addidentity"></span>
            </div>
        </div>


        <div class="main-container-inner">
            <div class="sidebar" id="sidebar">
                <br/>
            <ul class="nav nav-list">
                <li style="width: 100%;">
                    <a href="manage-home.html" target="main">
                        <i class="fa fa-home"></i>
                        <span class="menu-text "> 主页 </span>
                    </a>
                </li>
            </ul>


            <ul class="nav nav-list">
                <li style="width: 100%;">
                    <a href="manage-staff.html" target="main">
                        <i class="fa fa-address-card"></i>
                        <span class="menu-text "> KTV员工管理 </span>

                    </a>
                </li>
            </ul>


            <ul class="nav nav-list">
                <li style="width: 100%;">
                    <a href="manage-vip.html" target="main">
                        <i class="fa fa-users"></i>
                        <span class="menu-text "> KTV会员管理 </span>
                    </a>
                </li>
            </ul>


            <ul class="nav nav-list">
                <li style="width: 100%;">
                    <a href="manage-room.html" target="main">
                        <i class="fa fa-cog"></i>
                        <span class="menu-text "> 包间管理 </span>
                    </a>
                </li>
            </ul>
            <ul class="nav nav-list">
                <li style="width: 100%;">
                    <a href="manage-order.html" target="main">
                        <i class="fa fa-calendar-minus-o"></i>
                        <span class="menu-text "> 订单管理 </span>
                    </a>
                </li>
            </ul>
            <ul class="nav nav-list">
                <li style="width: 100%;">
                    <a href="manage-goods.html" target="main">
                        <i class="fa fa-cutlery"></i>
                        <span class="menu-text "> 商品管理 </span>
                    </a>
                </li>
            </ul>


                <ul class="nav nav-list">
                    <li style="width: 100%;">
                        <a href="manage-notice.html" target="main">
                            <i class="fa fa-tasks"></i>
                            <span class="menu-text "> 公告管理 </span>
                        </a>
                    </li>
                </ul>

                <ul class="nav nav-list">
                    <li style="width: 100%;">
                        <a href="manage-massage.html" target="main">
                            <i class="fa fa-tasks"></i>
                            <span class="none-point">消息中心</span>

                        </a>
                    </li>
                </ul>

            </div>

        <div class="main-content">
            <div class="breadcrumbs" id="breadcrumbs">
                <span style="margin: 20px">KTV管理系统---micfamily</span>
            </div>

            <div class="page-content" id="home">
                <div class="row">
                    <div class="col-xs-12">
                        <iframe id="man" name="main" src="manage-home.html"></iframe>
                    </div>
                </div>
            </div>

        </div>
        </div>
    </div>
</div>
<script>

    new Vue({
        el: "#app",
        data: {
            /* checkvalue:null,
             a:0*/
        },
        created() {
            setInterval(this.checks, 100);
            this.checks();

        },
        methods: {

            /*  changepoint(){
                  this.checkvalue=sessionStorage.getItem("massage");
                  //alert(this.checkvalue);
                  if(this.a == 0) {
                      if (this.checkvalue == 0) {

                      } else {
                          $(".none-point").removeClass('none-point').addClass('red-point');
                         // alert("-------------");
                          this.a = 1;
                          //document.styleSheets[0].addRule('.red-point::before','visibility: hidden'); // 支持IE
                      }
                  }else{
                      if(this.checkvalue == 0){
                          $(".red-point").removeClass('red-point').addClass('none-point');
                       //  alert("1");
                          this.a = 0;
                      }else{
                      }

                  }
              //window.location.reload();
              },*/
            checks() {
                /* axios.get("http://localhost:8088/admin/check").then(res=>{
                     this.checkvalue = res.data;
                     sessionStorage.setItem("massage",this.checkvalue);
                     this.changepoint();
                     //alert(this.checkvalue);
                     // sessionStorage.setItem("massages",this.checkvalue);//存储，在侧边栏页面获取
                     //alert(sessionStorage.getItem("massage"));
                 });*/

                axios.get("http://localhost:8088/admin/msg").then(res => {
                    console.log(res);
                    if (res.data.length > 0) {
                        $(".none-point").removeClass('none-point').addClass('red-point');
                    } else {
                        $(".red-point").removeClass('red-point').addClass('none-point');
                    }
                });

            }
        }
    });
</script>


</body>
</html>